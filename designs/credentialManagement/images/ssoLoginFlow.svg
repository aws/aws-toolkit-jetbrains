<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1125px" preserveAspectRatio="none" style="width:1126px;height:1125px;" version="1.1" viewBox="0 0 1126 1125" width="1126px" zoomAndPan="magnify"><defs/><g><rect fill="#CCCCCC" height="1110.0991" style="stroke: #383838; stroke-width: 1.0;" width="124" x="153" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="118" x="156" y="16.3843">External Program</text><rect fill="#CCCCCC" height="1110.0991" style="stroke: #383838; stroke-width: 1.0;" width="227" x="882" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="81" x="955" y="16.3843">AWS Service</text><rect fill="#FFFFFF" height="854.1396" style="stroke: #000000; stroke-width: 2.0;" width="1102" x="13" y="131.543"/><rect fill="#FFFFFF" height="648.2544" style="stroke: #000000; stroke-width: 2.0;" width="1017" x="23" y="243.0488"/><rect fill="#FFFFFF" height="104.5059" style="stroke: #000000; stroke-width: 2.0;" width="436" x="584" y="325.4282"/><rect fill="#FFFFFF" height="323.8633" style="stroke: #000000; stroke-width: 2.0;" width="767" x="263" y="560.4399"/><rect fill="#FFFFFF" height="263.6104" style="stroke: #000000; stroke-width: 2.0;" width="747" x="273" y="613.6929"/><rect fill="#FFFFFF" height="86.0522" style="stroke: none; stroke-width: 1.0;" width="747" x="273" y="689.0723"/><rect fill="#FFFFFF" height="102.1787" style="stroke: none; stroke-width: 1.0;" width="747" x="273" y="775.1245"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="51" x2="51" y1="85.4165" y2="1031.8091"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="214.5" x2="214.5" y1="85.4165" y2="1031.8091"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="314" x2="314" y1="85.4165" y2="1031.8091"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="461" x2="461" y1="85.4165" y2="1031.8091"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="653" x2="653" y1="85.4165" y2="1031.8091"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="848" x2="848" y1="85.4165" y2="1031.8091"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="948" x2="948" y1="85.4165" y2="1031.8091"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1062" x2="1062" y1="85.4165" y2="1031.8091"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="31" x="33" y="82.4292">User</text><ellipse cx="51.5" cy="16.1265" fill="#F8F8F8" rx="8" ry="8" style="stroke: #383838; stroke-width: 2.0;"/><path d="M51.5,24.1265 L51.5,51.1265 M38.5,32.1265 L64.5,32.1265 M51.5,51.1265 L38.5,66.1265 M51.5,51.1265 L64.5,66.1265 " fill="none" style="stroke: #383838; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="31" x="33" y="1044.1118">User</text><ellipse cx="51.5" cy="1057.0991" fill="#F8F8F8" rx="8" ry="8" style="stroke: #383838; stroke-width: 2.0;"/><path d="M51.5,1065.0991 L51.5,1092.0991 M38.5,1073.0991 L64.5,1073.0991 M51.5,1092.0991 L38.5,1107.0991 M51.5,1092.0991 L64.5,1107.0991 " fill="none" style="stroke: #383838; stroke-width: 2.0;"/><rect fill="#F8F8F8" height="30.29" style="stroke: #383838; stroke-width: 1.5;" width="69" x="180.5" y="54.1265"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="55" x="187.5" y="74.4292">Browser</text><rect fill="#F8F8F8" height="30.29" style="stroke: #383838; stroke-width: 1.5;" width="69" x="180.5" y="1030.8091"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="55" x="187.5" y="1051.1118">Browser</text><rect fill="#F8F8F8" height="30.29" style="stroke: #383838; stroke-width: 1.5;" width="62" x="283" y="54.1265"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="48" x="290" y="74.4292">Toolkit</text><rect fill="#F8F8F8" height="30.29" style="stroke: #383838; stroke-width: 1.5;" width="62" x="283" y="1030.8091"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="48" x="290" y="1051.1118">Toolkit</text><rect fill="#F8F8F8" height="46.5801" style="stroke: #383838; stroke-width: 1.5;" width="78" x="422" y="37.8364"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="64" x="429" y="58.1392">SSO Cred</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="57" x="432.5" y="74.4292">Provider</text><rect fill="#F8F8F8" height="46.5801" style="stroke: #383838; stroke-width: 1.5;" width="78" x="422" y="1030.8091"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="64" x="429" y="1051.1118">SSO Cred</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="57" x="432.5" y="1067.4019">Provider</text><rect fill="#F8F8F8" height="46.5801" style="stroke: #383838; stroke-width: 1.5;" width="118" x="594" y="37.8364"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="77" x="614.5" y="58.1392">SSO Access</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="104" x="601" y="74.4292">Token Provider</text><rect fill="#F8F8F8" height="46.5801" style="stroke: #383838; stroke-width: 1.5;" width="118" x="594" y="1030.8091"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="77" x="614.5" y="1051.1118">SSO Access</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="104" x="601" y="1067.4019">Token Provider</text><rect fill="#F8F8F8" height="30.29" style="stroke: #383838; stroke-width: 1.5;" width="56" x="820" y="54.1265"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="42" x="827" y="74.4292">Cache</text><rect fill="#F8F8F8" height="30.29" style="stroke: #383838; stroke-width: 1.5;" width="56" x="820" y="1030.8091"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="42" x="827" y="1051.1118">Cache</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="118" x="886" y="82.4292">SSO OIDC Service</text><path d="M930,33.1265 C930,23.1265 948,23.1265 948,23.1265 C948,23.1265 966,23.1265 966,33.1265 L966,59.1265 C966,69.1265 948,69.1265 948,69.1265 C948,69.1265 930,69.1265 930,59.1265 L930,33.1265 " fill="#F8F8F8" style="stroke: #000000; stroke-width: 1.5;"/><path d="M930,33.1265 C930,43.1265 948,43.1265 948,43.1265 C948,43.1265 966,43.1265 966,33.1265 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="118" x="886" y="1044.1118">SSO OIDC Service</text><path d="M930,1057.0991 C930,1047.0991 948,1047.0991 948,1047.0991 C948,1047.0991 966,1047.0991 966,1057.0991 L966,1083.0991 C966,1093.0991 948,1093.0991 948,1093.0991 C948,1093.0991 930,1093.0991 930,1083.0991 L930,1057.0991 " fill="#F8F8F8" style="stroke: #000000; stroke-width: 1.5;"/><path d="M930,1057.0991 C930,1067.0991 948,1067.0991 948,1067.0991 C948,1067.0991 966,1067.0991 966,1057.0991 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="79" x="1020" y="82.4292">SSO Service</text><path d="M1044.5,33.1265 C1044.5,23.1265 1062.5,23.1265 1062.5,23.1265 C1062.5,23.1265 1080.5,23.1265 1080.5,33.1265 L1080.5,59.1265 C1080.5,69.1265 1062.5,69.1265 1062.5,69.1265 C1062.5,69.1265 1044.5,69.1265 1044.5,59.1265 L1044.5,33.1265 " fill="#F8F8F8" style="stroke: #000000; stroke-width: 1.5;"/><path d="M1044.5,33.1265 C1044.5,43.1265 1062.5,43.1265 1062.5,43.1265 C1062.5,43.1265 1080.5,43.1265 1080.5,33.1265 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="79" x="1020" y="1044.1118">SSO Service</text><path d="M1044.5,1057.0991 C1044.5,1047.0991 1062.5,1047.0991 1062.5,1047.0991 C1062.5,1047.0991 1080.5,1047.0991 1080.5,1057.0991 L1080.5,1083.0991 C1080.5,1093.0991 1062.5,1093.0991 1062.5,1093.0991 C1062.5,1093.0991 1044.5,1093.0991 1044.5,1083.0991 L1044.5,1057.0991 " fill="#F8F8F8" style="stroke: #000000; stroke-width: 1.5;"/><path d="M1044.5,1057.0991 C1044.5,1067.0991 1062.5,1067.0991 1062.5,1067.0991 C1062.5,1067.0991 1080.5,1067.0991 1080.5,1057.0991 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><polygon fill="#383838" points="449,112.543,459,116.543,449,120.543,453,116.543" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="314" x2="455" y1="116.543" y2="116.543"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="123" x="321" y="111.769">Resolve Credentials</text><path d="M13,131.543 L184,131.543 L184,138.543 L174,148.543 L13,148.543 L13,131.543 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="854.1396" style="stroke: #000000; stroke-width: 2.0;" width="1102" x="13" y="131.543"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="126" x="28" y="144.9272">Role creds expired</text><polygon fill="#383838" points="641,165.7959,651,169.7959,641,173.7959,645,169.7959" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="461" x2="647" y1="169.7959" y2="169.7959"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="141" x="468" y="165.022">Request Access Token</text><polygon fill="#383838" points="836,194.9224,846,198.9224,836,202.9224,840,198.9224" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="653" x2="842" y1="198.9224" y2="198.9224"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="93" x="660" y="194.1484">Request Token</text><polygon fill="#383838" points="664,224.0488,654,228.0488,664,232.0488,660,228.0488" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="658" x2="847" y1="228.0488" y2="228.0488"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="84" x="670" y="223.2749">Return Token</text><path d="M23,243.0488 L280,243.0488 L280,250.0488 L270,260.0488 L23,260.0488 L23,243.0488 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="648.2544" style="stroke: #000000; stroke-width: 2.0;" width="1017" x="23" y="243.0488"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="212" x="38" y="256.4331">Access token expired / missing</text><polygon fill="#383838" points="836,277.3018,846,281.3018,836,285.3018,840,281.3018" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="653" x2="842" y1="281.3018" y2="281.3018"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="171" x="660" y="276.5278">Request Client Registration</text><polygon fill="#383838" points="664,306.4282,654,310.4282,664,314.4282,660,310.4282" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="658" x2="847" y1="310.4282" y2="310.4282"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="162" x="670" y="305.6543">Return Client Registration</text><path d="M584,325.4282 L875,325.4282 L875,332.4282 L865,342.4282 L584,342.4282 L584,325.4282 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="104.5059" style="stroke: #000000; stroke-width: 2.0;" width="436" x="584" y="325.4282"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="246" x="599" y="338.8125">Client registration expired / missing</text><polygon fill="#383838" points="936,359.6812,946,363.6812,936,367.6812,940,363.6812" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="653" x2="942" y1="363.6812" y2="363.6812"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="163" x="660" y="358.9072">Request to Register Client</text><polygon fill="#383838" points="664,388.8076,654,392.8076,664,396.8076,660,392.8076" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="658" x2="947" y1="392.8076" y2="392.8076"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="117" x="670" y="388.0337">Client Registration</text><polygon fill="#383838" points="836,417.9341,846,421.9341,836,425.9341,840,421.9341" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="653" x2="842" y1="421.9341" y2="421.9341"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="149" x="660" y="417.1602">Save Client Registration</text><polygon fill="#383838" points="936,454.0605,946,458.0605,936,462.0605,940,458.0605" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="653" x2="942" y1="458.0605" y2="458.0605"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="109" x="660" y="453.2866">Start Device Auth</text><polygon fill="#383838" points="664,483.187,654,487.187,664,491.187,660,487.187" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="658" x2="947" y1="487.187" y2="487.187"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="156" x="670" y="482.4131">Return SSO Login Details</text><polygon fill="#383838" points="226,512.3135,216,516.3135,226,520.3135,222,516.3135" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="220" x2="652" y1="516.3135" y2="516.3135"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="133" x="232" y="511.5396">Open SSO Login Page</text><polygon fill="#383838" points="203,541.4399,213,545.4399,203,549.4399,207,545.4399" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="51.5" x2="209" y1="545.4399" y2="545.4399"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="116" x="58.5" y="540.666">Perform SSO Login</text><path d="M263,560.4399 L337,560.4399 L337,567.4399 L327,577.4399 L263,577.4399 L263,560.4399 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="323.8633" style="stroke: #000000; stroke-width: 2.0;" width="767" x="263" y="560.4399"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="29" x="278" y="573.8242">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="103" x="352" y="572.9189">[Check For Token]</text><polygon fill="#383838" points="936,594.6929,946,598.6929,936,602.6929,940,598.6929" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="653" x2="942" y1="598.6929" y2="598.6929"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="83" x="660" y="593.9189">Create Token</text><path d="M273,613.6929 L335,613.6929 L335,620.6929 L325,630.6929 L273,630.6929 L273,613.6929 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="263.6104" style="stroke: #000000; stroke-width: 2.0;" width="747" x="273" y="613.6929"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="288" y="627.0771">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="51" x="350" y="626.1719">[Success]</text><polygon fill="#383838" points="664,647.9458,654,651.9458,664,655.9458,660,651.9458" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="658" x2="947" y1="651.9458" y2="651.9458"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="99" x="670" y="647.1719">Token Returned</text><polygon fill="#383838" points="836,677.0723,846,681.0723,836,685.0723,840,681.0723" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="653" x2="842" y1="681.0723" y2="681.0723"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="71" x="660" y="676.2983">Save Token</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="273" x2="1020" y1="690.0723" y2="690.0723"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="83" x="278" y="700.5513">[Auth Pending]</text><polygon fill="#383838" points="664,720.998,654,724.998,664,728.998,660,724.998" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="658" x2="947" y1="724.998" y2="724.998"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="208" x="670" y="720.2241">Auth Pending or Slow Down Error</text><line style="stroke: #383838; stroke-width: 1.0;" x1="653" x2="695" y1="754.1245" y2="754.1245"/><line style="stroke: #383838; stroke-width: 1.0;" x1="695" x2="695" y1="754.1245" y2="767.1245"/><line style="stroke: #383838; stroke-width: 1.0;" x1="654" x2="695" y1="767.1245" y2="767.1245"/><polygon fill="#383838" points="664,763.1245,654,767.1245,664,771.1245,660,767.1245" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="33" x="660" y="749.3506">Sleep</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="273" x2="1020" y1="776.1245" y2="776.1245"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="37" x="278" y="786.6035">[Error]</text><polygon fill="#383838" points="664,807.0503,654,811.0503,664,815.0503,660,811.0503" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="658" x2="947" y1="811.0503" y2="811.0503"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="69" x="670" y="806.2764">Other Error</text><polygon fill="#383838" points="472,836.1768,462,840.1768,472,844.1768,468,840.1768" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="466" x2="652" y1="840.1768" y2="840.1768"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="168" x="478" y="835.4028">Abort Process, Throw Error</text><polygon fill="#383838" points="325,865.3032,315,869.3032,325,873.3032,321,869.3032" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="319" x2="460" y1="869.3032" y2="869.3032"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="75" x="331" y="864.5293">Report Error</text><polygon fill="#383838" points="472,915.4297,462,919.4297,472,923.4297,468,919.4297" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="466" x2="652" y1="919.4297" y2="919.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="132" x="478" y="914.6558">Return Access Token</text><polygon fill="#383838" points="1050.5,944.5562,1060.5,948.5562,1050.5,952.5562,1054.5,948.5562" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="461" x2="1056.5" y1="948.5562" y2="948.5562"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="156" x="468" y="943.7822">Request Role Credentials</text><polygon fill="#383838" points="472,973.6826,462,977.6826,472,981.6826,468,977.6826" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="466" x2="1061.5" y1="977.6826" y2="977.6826"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="240" x="478" y="972.9087">Return Role's AWS Session Credentials</text><polygon fill="#383838" points="325,1009.8091,315,1013.8091,325,1017.8091,321,1013.8091" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="319" x2="460" y1="1013.8091" y2="1013.8091"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="102" x="331" y="1009.0352">AWS Credentials</text><!--MD5=[79a18d8a869caa2b2d78a28577ffdbed]
@startuml
skinparam monochrome true
skinparam shadowing false

actor User
box "External Program" #LightBlue
participant Browser
end box
participant Toolkit
participant "SSO Cred\nProvider" as SsoCredPro
participant "SSO Access\nToken Provider" as SsoAccessPro
participant Cache

box "AWS Service" #LightBlue
database "SSO OIDC Service" as SsoOidc
database "SSO Service" as Sso
end box

Toolkit -> SsoCredPro: Resolve Credentials

group Role creds expired
SsoCredPro -> SsoAccessPro : Request Access Token
SsoAccessPro -> Cache : Request Token
Cache -> SsoAccessPro : Return Token

    group Access token expired / missing

        SsoAccessPro -> Cache : Request Client Registration
        Cache -> SsoAccessPro : Return Client Registration
        group Client registration expired / missing
            SsoAccessPro -> SsoOidc: Request to Register Client
            SsoOidc -> SsoAccessPro: Client Registration
            SsoAccessPro -> Cache: Save Client Registration
        end

        SsoAccessPro -> SsoOidc: Start Device Auth
        SsoOidc -> SsoAccessPro: Return SSO Login Details

        SsoAccessPro -> Browser: Open SSO Login Page
        User -> Browser: Perform SSO Login
        loop Check For Token
            SsoAccessPro -> SsoOidc: Create Token
            alt Success
                SsoOidc -> SsoAccessPro: Token Returned
                SsoAccessPro -> Cache : Save Token
            else Auth Pending
                SsoOidc -> SsoAccessPro: Auth Pending or Slow Down Error
                SsoAccessPro -> SsoAccessPro: Sleep
            else Error
                SsoOidc -> SsoAccessPro: Other Error
                SsoAccessPro -> SsoCredPro: Abort Process, Throw Error
                SsoCredPro -> Toolkit: Report Error
            end
        end
    end

SsoAccessPro -> SsoCredPro : Return Access Token
SsoCredPro -> Sso : Request Role Credentials
Sso -> SsoCredPro : Return Role's AWS Session Credentials
end

SsoCredPro -> Toolkit: AWS Credentials
@enduml

PlantUML version 1.2020.15(Sun Jun 28 11:39:45 UTC 2020)
(GPLV2 source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>
