{
    "version":"2.0",
    "metadata":{
        "apiVersion":"2023-11-27",
        "endpointPrefix":"amazoncodewhispererstreamingservice",
        "jsonVersion":"1.0",
        "protocol":"json",
        "serviceFullName":"Amazon CodeWhisperer Streaming",
        "serviceId":"CodeWhispererStreaming",
        "signatureVersion":"bearer",
        "signingName":"amazoncodewhispererstreamingservice",
        "targetPrefix":"AmazonCodeWhispererStreamingService",
        "uid":"codewhispererstreaming-2023-11-27"
    },
    "operations":{
        "ExportResultArchive":{
            "name":"ExportResultArchive",
            "http":{
                "method":"POST",
                "requestUri":"/"
            },
            "input":{"shape":"ExportResultArchiveRequest"},
            "output":{"shape":"ExportResultArchiveResponse"},
            "errors":[
                {"shape":"ThrottlingException"},
                {"shape":"ConflictException"},
                {"shape":"ResourceNotFoundException"},
                {"shape":"InternalServerException"},
                {"shape":"ValidationException"},
                {"shape":"AccessDeniedException"}
            ]
        },
        "GenerateAssistantResponse":{
            "name":"GenerateAssistantResponse",
            "http":{
                "method":"POST",
                "requestUri":"/"
            },
            "input":{"shape":"GenerateAssistantResponseRequest"},
            "output":{"shape":"GenerateAssistantResponseResponse"},
            "errors":[
                {"shape":"ThrottlingException"},
                {"shape":"InternalServerException"},
                {"shape":"ValidationException"},
                {"shape":"AccessDeniedException"}
            ]
        },
        "GenerateTaskAssistPlan":{
            "name":"GenerateTaskAssistPlan",
            "http":{
                "method":"POST",
                "requestUri":"/"
            },
            "input":{"shape":"GenerateTaskAssistPlanRequest"},
            "output":{"shape":"GenerateTaskAssistPlanResponse"},
            "errors":[
                {"shape":"ThrottlingException"},
                {"shape":"ServiceQuotaExceededException"},
                {"shape":"ConflictException"},
                {"shape":"ResourceNotFoundException"},
                {"shape":"InternalServerException"},
                {"shape":"ValidationException"},
                {"shape":"AccessDeniedException"}
            ]
        }
    },
    "shapes":{
        "AccessDeniedException":{
            "type":"structure",
            "required":["message"],
            "members":{
                "message":{"shape":"String"}
            },
            "exception":true
        },
        "ArtifactId":{
            "type":"string",
            "max":126,
            "min":1,
            "pattern":"[a-zA-Z0-9-_]+"
        },
        "AssistantResponseEvent":{
            "type":"structure",
            "required":["content"],
            "members":{
                "content":{"shape":"AssistantResponseEventContentString"}
            },
            "event":true
        },
        "AssistantResponseEventContentString":{
            "type":"string",
            "max":10240,
            "min":0,
            "sensitive":true
        },
        "AssistantResponseMessage":{
            "type":"structure",
            "required":["content"],
            "members":{
                "messageId":{"shape":"AssistantResponseMessageMessageIdString"},
                "content":{"shape":"AssistantResponseMessageContentString"},
                "supplementaryWebLinks":{"shape":"SupplementaryWebLinks"},
                "references":{"shape":"References"},
                "followupPrompt":{"shape":"FollowupPrompt"}
            }
        },
        "AssistantResponseMessageContentString":{
            "type":"string",
            "max":4096,
            "min":0,
            "sensitive":true
        },
        "AssistantResponseMessageMessageIdString":{
            "type":"string",
            "max":128,
            "min":0
        },
        "BinaryMetadataEvent":{
            "type":"structure",
            "members":{
                "size":{"shape":"Long"},
                "mimeType":{"shape":"String"},
                "contentChecksum":{"shape":"ContentChecksum"},
                "contentChecksumType":{"shape":"ContentChecksumType"}
            },
            "event":true,
            "sensitive":true
        },
        "BinaryPayloadEvent":{
            "type":"structure",
            "members":{
                "bytes":{"shape":"PartBody"}
            },
            "event":true,
            "sensitive":true
        },
        "ChatHistory":{
            "type":"list",
            "member":{"shape":"ChatMessage"},
            "max":10,
            "min":0
        },
        "ChatMessage":{
            "type":"structure",
            "members":{
                "userInputMessage":{"shape":"UserInputMessage"},
                "assistantResponseMessage":{"shape":"AssistantResponseMessage"}
            },
            "union":true
        },
        "ChatResponseStream":{
            "type":"structure",
            "members":{
                "messageMetadataEvent":{"shape":"MessageMetadataEvent"},
                "assistantResponseEvent":{"shape":"AssistantResponseEvent"},
                "codeReferenceEvent":{"shape":"CodeReferenceEvent"},
                "supplementaryWebLinksEvent":{"shape":"SupplementaryWebLinksEvent"},
                "followupPromptEvent":{"shape":"FollowupPromptEvent"},
                "invalidStateEvent": {"shape":  "InvalidStateEvent"},
                "error":{"shape":"InternalServerException"}
            },
            "eventstream":true
        },
        "ChatTriggerType":{
            "type":"string",
            "enum":[
                "MANUAL",
                "DIAGNOSTIC"
            ]
        },
        "CodeReferenceEvent":{
            "type":"structure",
            "members":{
                "references":{"shape":"References"}
            },
            "event":true
        },
        "ConflictException":{
            "type":"structure",
            "required":["message"],
            "members":{
                "message":{"shape":"String"}
            },
            "exception":true
        },
        "ContentChecksum":{
            "type":"string",
            "max":512,
            "min":1
        },
        "ContentChecksumType":{
            "type":"string",
            "enum":["SHA_256"]
        },
        "ContextTruncationScheme":{
            "type":"string",
            "enum":[
                "ANALYSIS",
                "GUMBY"
            ]
        },
        "ConversationId":{
            "type":"string",
            "max":128,
            "min":1
        },
        "ConversationState":{
            "type":"structure",
            "required":[
                "currentMessage",
                "chatTriggerType"
            ],
            "members":{
                "conversationId":{"shape":"ConversationId"},
                "history":{"shape":"ChatHistory"},
                "currentMessage":{"shape":"ChatMessage"},
                "chatTriggerType":{"shape":"ChatTriggerType"}
            }
        },
        "CursorState":{
            "type":"structure",
            "members":{
                "position":{"shape":"Position"},
                "range":{"shape":"Range"}
            },
            "union":true
        },
        "Diagnostic":{
            "type":"structure",
            "members":{
                "textDocumentDiagnostic":{"shape":"TextDocumentDiagnostic"},
                "runtimeDiagnostic":{"shape":"RuntimeDiagnostic"}
            },
            "union":true
        },
        "DiagnosticSeverity":{
            "type":"string",
            "enum":[
                "ERROR",
                "WARNING",
                "INFORMATION",
                "HINT"
            ]
        },
        "DocumentSymbol":{
            "type":"structure",
            "required":[
                "name",
                "type"
            ],
            "members":{
                "name":{"shape":"DocumentSymbolNameString"},
                "type":{"shape":"SymbolType"},
                "source":{"shape":"DocumentSymbolSourceString"}
            }
        },
        "DocumentSymbolNameString":{
            "type":"string",
            "max":256,
            "min":1
        },
        "DocumentSymbolSourceString":{
            "type":"string",
            "max":256,
            "min":1
        },
        "DocumentSymbols":{
            "type":"list",
            "member":{"shape":"DocumentSymbol"},
            "max":1000,
            "min":0
        },
        "EditorState":{
            "type":"structure",
            "members":{
                "document":{"shape":"TextDocument"},
                "cursorState":{"shape":"CursorState"}
            }
        },
        "ExportContext":{
            "type":"structure",
            "members":{
                "transformationExportContext":{"shape":"TransformationExportContext"}
            },
            "union":true
        },
        "ExportIntent":{
            "type":"string",
            "enum":[
                "TRANSFORMATION",
                "TASK_ASSIST"
            ]
        },
        "ExportResultArchiveRequest":{
            "type":"structure",
            "required":[
                "exportId",
                "exportIntent"
            ],
            "members":{
                "exportId":{"shape":"String"},
                "exportIntent":{"shape":"ExportIntent"},
                "exportContext":{"shape":"ExportContext"}
            }
        },
        "ExportResultArchiveResponse":{
            "type":"structure",
            "required":["body"],
            "members":{
                "body":{"shape":"ResultArchiveStream"}
            }
        },
        "FollowupPrompt":{
            "type":"structure",
            "required":["content"],
            "members":{
                "content":{"shape":"FollowupPromptContentString"},
                "userIntent":{"shape":"UserIntent"}
            }
        },
        "FollowupPromptContentString":{
            "type":"string",
            "max":4096,
            "min":0,
            "sensitive":true
        },
        "FollowupPromptEvent":{
            "type":"structure",
            "members":{
                "followupPrompt":{"shape":"FollowupPrompt"}
            },
            "event":true
        },
        "GenerateAssistantResponseRequest":{
            "type":"structure",
            "required":["conversationState"],
            "members":{
                "conversationState":{"shape":"ConversationState"}
            }
        },
        "GenerateAssistantResponseResponse":{
            "type":"structure",
            "required":[
                "conversationId",
                "generateAssistantResponseResponse"
            ],
            "members":{
                "conversationId":{"shape":"ConversationId"},
                "generateAssistantResponseResponse":{"shape":"ChatResponseStream"}
            }
        },
        "GenerateTaskAssistPlanRequest":{
            "type":"structure",
            "required":[
                "conversationState",
                "workspaceState"
            ],
            "members":{
                "conversationState":{"shape":"ConversationState"},
                "workspaceState":{"shape":"WorkspaceState"}
            }
        },
        "GenerateTaskAssistPlanResponse":{
            "type":"structure",
            "members":{
                "planningResponseStream":{"shape":"ChatResponseStream"}
            }
        },
        "Integer":{
            "type":"integer",
            "box":true
        },
        "InternalServerException":{
            "type":"structure",
            "required":["message"],
            "members":{
                "message":{"shape":"String"}
            },
            "exception":true,
            "fault":true,
            "retryable":{"throttling":false}
        },
        "InvalidStateEvent":{
            "type":"structure",
            "members":{
                "reason":{"shape":"InvalidStateReason"},
                "message":{"shape": "String"}
            },
            "event":true
        },
        "InvalidStateReason":{
            "type":"string",
            "enum":["INVALID_TASK_ASSIST_PLAN"]
        },
        "Long":{
            "type":"long",
            "box":true
        },
        "MessageMetadataEvent":{
            "type":"structure",
            "members":{
                "conversationId":{"shape":"MessageMetadataEventConversationIdString"}
            },
            "event":true
        },
        "MessageMetadataEventConversationIdString":{
            "type":"string",
            "max":128,
            "min":0
        },
        "PartBody":{
            "type":"blob",
            "max":1000000,
            "min":0,
            "sensitive":true
        },
        "Position":{
            "type":"structure",
            "required":[
                "line",
                "character"
            ],
            "members":{
                "line":{"shape":"Integer"},
                "character":{"shape":"Integer"}
            }
        },
        "ProgrammingLanguage":{
            "type":"structure",
            "required":["languageName"],
            "members":{
                "languageName":{"shape":"ProgrammingLanguageLanguageNameString"}
            }
        },
        "ProgrammingLanguageLanguageNameString":{
            "type":"string",
            "max":128,
            "min":1,
            "pattern":"(python|javascript|java|csharp|typescript|c|cpp|go|kotlin|php|ruby|rust|scala|shell|sql|json|yaml|vue|tf)"
        },
        "Range":{
            "type":"structure",
            "required":[
                "start",
                "end"
            ],
            "members":{
                "start":{"shape":"Position"},
                "end":{"shape":"Position"}
            }
        },
        "Reference":{
            "type":"structure",
            "members":{
                "licenseName":{"shape":"ReferenceLicenseNameString"},
                "repository":{"shape":"ReferenceRepositoryString"},
                "url":{"shape":"ReferenceUrlString"},
                "recommendationContentSpan":{"shape":"Span"}
            }
        },
        "ReferenceLicenseNameString":{
            "type":"string",
            "max":1024,
            "min":1
        },
        "ReferenceRepositoryString":{
            "type":"string",
            "max":1024,
            "min":1
        },
        "ReferenceUrlString":{
            "type":"string",
            "max":1024,
            "min":1
        },
        "References":{
            "type":"list",
            "member":{"shape":"Reference"},
            "max":10,
            "min":0
        },
        "ResourceNotFoundException":{
            "type":"structure",
            "required":["message"],
            "members":{
                "message":{"shape":"String"}
            },
            "exception":true
        },
        "ResultArchiveStream":{
            "type":"structure",
            "members":{
                "binaryMetadataEvent":{"shape":"BinaryMetadataEvent"},
                "binaryPayloadEvent":{"shape":"BinaryPayloadEvent"},
                "internalServerException":{"shape":"InternalServerException"}
            },
            "eventstream":true
        },
        "RuntimeDiagnostic":{
            "type":"structure",
            "required":[
                "source",
                "severity",
                "message"
            ],
            "members":{
                "source":{"shape":"RuntimeDiagnosticSourceString"},
                "severity":{"shape":"DiagnosticSeverity"},
                "message":{"shape":"RuntimeDiagnosticMessageString"}
            }
        },
        "RuntimeDiagnosticMessageString":{
            "type":"string",
            "max":1024,
            "min":0,
            "sensitive":true
        },
        "RuntimeDiagnosticSourceString":{
            "type":"string",
            "max":1024,
            "min":0,
            "sensitive":true
        },
        "SensitiveString":{
            "type":"string",
            "sensitive":true
        },
        "Span":{
            "type":"structure",
            "members":{
                "start":{"shape":"SpanStartInteger"},
                "end":{"shape":"SpanEndInteger"}
            }
        },
        "SpanEndInteger":{
            "type":"integer",
            "box":true,
            "min":0
        },
        "SpanStartInteger":{
            "type":"integer",
            "box":true,
            "min":0
        },
        "String":{"type":"string"},
        "SupplementaryWebLink":{
            "type":"structure",
            "required":[
                "url",
                "title"
            ],
            "members":{
                "url":{"shape":"SupplementaryWebLinkUrlString"},
                "title":{"shape":"SupplementaryWebLinkTitleString"},
                "snippet":{"shape":"SupplementaryWebLinkSnippetString"}
            }
        },
        "SupplementaryWebLinkSnippetString":{
            "type":"string",
            "max":1024,
            "min":1,
            "sensitive":true
        },
        "SupplementaryWebLinkTitleString":{
            "type":"string",
            "max":1024,
            "min":1,
            "sensitive":true
        },
        "SupplementaryWebLinkUrlString":{
            "type":"string",
            "max":1024,
            "min":1,
            "sensitive":true
        },
        "SupplementaryWebLinks":{
            "type":"list",
            "member":{"shape":"SupplementaryWebLink"},
            "max":10,
            "min":0
        },
        "SupplementaryWebLinksEvent":{
            "type":"structure",
            "members":{
                "supplementaryWebLinks":{"shape":"SupplementaryWebLinks"}
            },
            "event":true
        },
        "SymbolType":{
            "type":"string",
            "enum":[
                "DECLARATION",
                "USAGE"
            ]
        },
        "TextDocument":{
            "type":"structure",
            "required":["relativeFilePath"],
            "members":{
                "relativeFilePath":{"shape":"TextDocumentRelativeFilePathString"},
                "programmingLanguage":{"shape":"ProgrammingLanguage"},
                "text":{"shape":"TextDocumentTextString"},
                "documentSymbols":{"shape":"DocumentSymbols"}
            }
        },
        "TextDocumentDiagnostic":{
            "type":"structure",
            "required":[
                "document",
                "range",
                "source",
                "severity",
                "message"
            ],
            "members":{
                "document":{"shape":"TextDocument"},
                "range":{"shape":"Range"},
                "source":{"shape":"SensitiveString"},
                "severity":{"shape":"DiagnosticSeverity"},
                "message":{"shape":"TextDocumentDiagnosticMessageString"}
            }
        },
        "TextDocumentDiagnosticMessageString":{
            "type":"string",
            "max":1024,
            "min":0,
            "sensitive":true
        },
        "TextDocumentRelativeFilePathString":{
            "type":"string",
            "max":4096,
            "min":1,
            "sensitive":true
        },
        "TextDocumentTextString":{
            "type":"string",
            "max":10240,
            "min":0,
            "sensitive":true
        },
        "ThrottlingException":{
            "type":"structure",
            "required":["message"],
            "members":{
                "message":{"shape":"String"}
            },
            "exception":true,
            "retryable":{"throttling":true}
        },
        "ServiceQuotaExceededException":{
            "type":"structure",
            "required":["message"],
            "members":{
                "message":{"shape":"String"}
            },
            "exception":true,
            "retryable":{"throttling":true}
        },
        "TransformationDownloadArtifactType":{
            "type":"string",
            "enum":[
                "ClientInstructions",
                "Logs"
            ]
        },
        "TransformationExportContext":{
            "type":"structure",
            "required":[
                "downloadArtifactId",
                "downloadArtifactType"
            ],
            "members":{
                "downloadArtifactId":{"shape":"ArtifactId"},
                "downloadArtifactType":{"shape":"TransformationDownloadArtifactType"}
            }
        },
        "UploadId":{
            "type":"string",
            "max":128,
            "min":1
        },
        "UserInputMessage":{
            "type":"structure",
            "required":["content"],
            "members":{
                "content":{"shape":"UserInputMessageContentString"},
                "userInputMessageContext":{"shape":"UserInputMessageContext"},
                "userIntent":{"shape":"UserIntent"}
            }
        },
        "UserInputMessageContentString":{
            "type":"string",
            "max":4096,
            "min":0,
            "sensitive":true
        },
        "UserInputMessageContext":{
            "type":"structure",
            "members":{
                "editorState":{"shape":"EditorState"},
                "diagnostic":{"shape":"Diagnostic"}
            }
        },
        "UserIntent":{
            "type":"string",
            "enum":[
                "SUGGEST_ALTERNATE_IMPLEMENTATION",
                "APPLY_COMMON_BEST_PRACTICES",
                "IMPROVE_CODE",
                "SHOW_EXAMPLES",
                "CITE_SOURCES",
                "EXPLAIN_LINE_BY_LINE",
                "EXPLAIN_CODE_SELECTION"
            ]
        },
        "ValidationException":{
            "type":"structure",
            "required":["message"],
            "members":{
                "message":{"shape":"String"},
                "reason":{"shape":"ValidationExceptionReason"}
            },
            "exception":true
        },
        "ValidationExceptionReason":{
            "type":"string",
            "enum":["INVALID_CONVERSATION_ID"]
        },
        "WorkspaceState":{
            "type":"structure",
            "required":[
                "uploadId",
                "programmingLanguage"
            ],
            "members":{
                "uploadId":{"shape":"UploadId"},
                "programmingLanguage":{"shape":"ProgrammingLanguage"},
                "contextTruncationScheme":{"shape":"ContextTruncationScheme"}
            }
        }
    }
}
